---
interface Props {
  title: string;
  description: string;
  href: string;
  image?: string;
  category?: string;
  readTime?: string;
  variant?: 'default' | 'featured' | 'horizontal';
}

const { title, description, href, image, category, readTime, variant = 'default' } = Astro.props;

// Cores por categoria
const categoryColors: Record<string, { bg: string; text: string; border: string }> = {
  'Plantas': { bg: 'bg-leaf-50', text: 'text-leaf-700', border: 'border-leaf-200' },
  'Problemas': { bg: 'bg-earth-50', text: 'text-earth-700', border: 'border-earth-200' },
  'Guias': { bg: 'bg-sun-50', text: 'text-sun-700', border: 'border-sun-200' },
  'Dicas': { bg: 'bg-water-50', text: 'text-water-700', border: 'border-water-200' },
  'default': { bg: 'bg-gray-50', text: 'text-gray-700', border: 'border-gray-200' }
};

const colors = categoryColors[category || 'default'] || categoryColors['default'];
---

{variant === 'horizontal' ? (
  <!-- Card Horizontal -->
  <article class="group bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-xl hover:border-leaf-200 transition-all duration-300">
    <a href={href} class="flex flex-col sm:flex-row">
      {image && (
        <div class="sm:w-48 aspect-video sm:aspect-square overflow-hidden bg-gradient-to-br from-leaf-50 to-earth-50 flex-shrink-0">
          <img
            src={image}
            alt={title}
            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
            loading="lazy"
          />
        </div>
      )}
      <div class="flex-1 p-5 flex flex-col justify-center">
        <div class="flex items-center gap-2 mb-2">
          {category && (
            <span class={`inline-flex items-center gap-1 px-2.5 py-1 ${colors.bg} ${colors.text} text-xs font-semibold rounded-full`}>
              <span class="w-1.5 h-1.5 rounded-full bg-current opacity-60"></span>
              {category}
            </span>
          )}
          {readTime && (
            <span class="text-xs text-gray-400 flex items-center gap-1">
              <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              {readTime}
            </span>
          )}
        </div>
        <h3 class="font-bold text-gray-900 mb-1 group-hover:text-leaf-600 transition-colors line-clamp-2">
          {title}
        </h3>
        <p class="text-gray-500 text-sm line-clamp-2">{description}</p>
      </div>
    </a>
  </article>
) : variant === 'featured' ? (
  <!-- Card Featured (Grande) -->
  <article class="group relative bg-white rounded-3xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-300">
    <a href={href} class="block">
      {image && (
        <div class="aspect-[16/10] overflow-hidden bg-gradient-to-br from-leaf-100 to-earth-100">
          <img
            src={image}
            alt={title}
            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
            loading="lazy"
          />
          <!-- Overlay gradiente -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
        </div>
      )}
      <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
        <div class="flex items-center gap-3 mb-3">
          {category && (
            <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-white/20 backdrop-blur-sm text-white text-xs font-semibold rounded-full">
              <span class="w-1.5 h-1.5 rounded-full bg-leaf-400"></span>
              {category}
            </span>
          )}
          {readTime && (
            <span class="text-xs text-white/80 flex items-center gap-1">
              <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              {readTime}
            </span>
          )}
        </div>
        <h3 class="font-bold text-xl sm:text-2xl mb-2 group-hover:text-leaf-200 transition-colors line-clamp-2">
          {title}
        </h3>
        <p class="text-white/80 text-sm line-clamp-2 mb-4">{description}</p>
        <span class="inline-flex items-center text-sm font-medium text-leaf-300 group-hover:text-leaf-200 transition-colors">
          Ler artigo completo
          <svg class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </span>
      </div>
    </a>
  </article>
) : (
  <!-- Card Default -->
  <article class="group bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-xl hover:border-leaf-200 transition-all duration-300 card-hover">
    <a href={href} class="block">
      {image ? (
        <div class="aspect-[4/3] overflow-hidden bg-gradient-to-br from-leaf-50 to-earth-50 relative">
          <img
            src={image}
            alt={title}
            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
            loading="lazy"
          />
          <!-- Badge categoria sobre a imagem -->
          {category && (
            <div class="absolute top-3 left-3">
              <span class={`inline-flex items-center gap-1.5 px-2.5 py-1 bg-white/90 backdrop-blur-sm ${colors.text} text-xs font-semibold rounded-full shadow-sm`}>
                <span class={`w-1.5 h-1.5 rounded-full bg-current`}></span>
                {category}
              </span>
            </div>
          )}
        </div>
      ) : (
        <div class="aspect-[4/3] bg-gradient-to-br from-leaf-100 via-leaf-50 to-earth-50 flex items-center justify-center relative">
          <!-- Icone placeholder -->
          <svg class="w-16 h-16 text-leaf-300" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M32 56V28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <path d="M32 40C32 40 18 36 14 24C22 24 32 32 32 40Z" fill="currentColor" fill-opacity="0.3" stroke="currentColor" stroke-width="1.5"/>
            <path d="M32 32C32 32 46 28 50 16C42 16 32 24 32 32Z" fill="currentColor" fill-opacity="0.2" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          {category && (
            <div class="absolute top-3 left-3">
              <span class={`inline-flex items-center gap-1.5 px-2.5 py-1 ${colors.bg} ${colors.text} text-xs font-semibold rounded-full`}>
                <span class="w-1.5 h-1.5 rounded-full bg-current opacity-60"></span>
                {category}
              </span>
            </div>
          )}
        </div>
      )}
    </a>
    <div class="p-5">
      <div class="flex items-center gap-2 mb-3">
        {readTime && (
          <span class="text-xs text-gray-400 flex items-center gap-1">
            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            {readTime} de leitura
          </span>
        )}
      </div>
      <a href={href} class="block group-hover:text-leaf-600 transition-colors">
        <h3 class="font-bold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-leaf-600">
          {title}
        </h3>
      </a>
      <p class="text-gray-500 text-sm line-clamp-3 mb-4">
        {description}
      </p>
      <a
        href={href}
        class="inline-flex items-center text-sm font-semibold text-leaf-600 hover:text-leaf-700 transition-colors"
      >
        Ler mais
        <svg class="w-4 h-4 ml-1.5 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
      </a>
    </div>
  </article>
)}
